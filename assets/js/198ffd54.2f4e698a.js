"use strict";(self.webpackChunkblog_website=self.webpackChunkblog_website||[]).push([[414],{6733:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var a=n(9074),s=n(5105),i=n(7890),l=n(4651);const r={slug:"ai",title:"AI",authors:["marvin-season"],tags:["javscript","ai"],date:"2024-02-06"},c=void 0,o={authorsImageUrls:[void 0]},d=[{value:"Basic Concepts",id:"basic-concepts",level:2}];function u(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{}),"\n",(0,s.jsx)(t.h2,{id:"basic-concepts",children:"Basic Concepts"}),"\n",(0,s.jsx)(t.p,{children:"AIInput is a component that can collect user input and handle it."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"type CoreInputProps = {\n    onSend: (value: string, attachments: Attachment[]) => void;\n    attachmentRender: (value: string, onSelect: (attactment: Attachment) => void) => JSX.Element;\n    attachmentDisplayer: (attachments: Attachment[], setAttachments: AttachmentSetter) => JSX.Element;\n    attachmentHandler?: (attactment: Attachment, setAttachments: AttachmentSetter) => void;\n}\n"})}),"\n"]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},4651:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(8101);const s={aiInputContainer:"aiInputContainer_Vebr",attachmentGroup:"attachmentGroup_btSM",attachmentListContainer:"attachmentListContainer_Ltbk",attachment:"attachment_qfjR",input:"input_VD1D",sendBtn:"sendBtn_I8km"};var i=n(73),l=n(5105);const r=e=>{let{onSend:t,attachmentRender:n,attachmentDisplayer:i,attachmentHandler:r}=e;const[c,o]=(0,a.useState)(""),[d,u]=(0,a.useState)([]);return(0,l.jsxs)("div",{className:s.aiInputContainer,children:[(0,l.jsx)("div",{children:i(d,u)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{className:s.input,type:"text",value:c,onChange:e=>o(e.target.value)}),(0,l.jsx)("button",{className:s.sendBtn,onClick:()=>t(c,d),children:"Send"})]}),(0,l.jsx)("div",{children:n(c,(e=>{r?r(e,u):u([...d,e])}))})]})},c=function(e,t){return e.reduce(((e,n)=>{const a=t(n);return(e[a]||=[]).push(n),e}),{})},o=[{type:"tool",symbol:"@",label:"tool 1",value:"tool1"},{type:"tool",symbol:"@",label:"tool 2",value:"tool2"},{type:"file",symbol:"#",label:"file 1",value:"file1"}];function d(e){let{onSend:t}=e;const n=(0,a.useMemo)((()=>c(o,(e=>{let{type:t}=e;return t}))),[o]),[d,u]=(0,a.useState)(void 0);return(0,l.jsx)(r,{onSend:t,attachmentHandler:(e,t)=>{t((t=>t.find((t=>t.value===e.value))?t.filter((t=>t.value!==e.value)):[...t,e]))},attachmentRender:(e,t)=>(0,l.jsx)("div",{className:s.attachmentGroup,children:Object.entries(n).map((e=>{let[a,r]=e;return(0,l.jsx)(i.Ay,{delay:100,duration:0,content:(0,l.jsx)("div",{className:s.attachmentListContainer,children:n[d]?.map((e=>(0,l.jsx)("span",{onClick:()=>{t(e)},children:e.label},e.value)))}),interactive:!0,placement:"top-start",visible:d===a,onClickOutside:()=>u(null),children:(0,l.jsx)("span",{className:s.attachment,onClick:()=>{u(a)},children:n[a][0].symbol})},a)}))}),attachmentDisplayer:(e,t)=>(0,l.jsx)("div",{className:s.attachmentGroup,children:e.map((e=>(0,l.jsx)("span",{className:s.attachment,style:{backgroundColor:"lightgreen"},onClick:()=>{t((t=>t.filter((t=>t.value!==e.value))))},children:e.label},e.value)))})})}function u(e){let{messages:t}=e;return(0,l.jsx)(l.Fragment,{children:t.map(((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("span",{children:[e.role,":"]}),(0,l.jsx)("span",{children:e.content}),(0,l.jsxs)("span",{children:[" refers: ",e.attachments?.map(((e,t)=>(0,l.jsx)("span",{children:e.label},t)))]})]},t)))})}function m(){const{messages:e,setMessages:t,loading:n,setLoading:i}=function(){const[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1);return{messages:e,setMessages:t,loading:n,setLoading:s}}();return(0,l.jsxs)("div",{className:s.aiInputContainer,children:[(0,l.jsx)(u,{messages:e}),n?(0,l.jsx)("div",{children:"loading..."}):null,(0,l.jsx)(d,{onSend:async(a,s)=>{if(!n&&a){i(!0);try{await new Promise((e=>setTimeout(e,1e3))),t([...e,{role:"user",content:a,attachments:s},{role:"assistant",content:a,attachments:s}])}catch(l){console.error(l)}finally{i(!1)}}}})]})}},9074:e=>{e.exports=JSON.parse('{"permalink":"/danny-website/blog/ai","source":"@site/blog/ai/index.mdx","title":"AI","description":"Basic Concepts","date":"2024-02-06T00:00:00.000Z","tags":[{"inline":false,"label":"Javscript","permalink":"/danny-website/blog/tags/javscript","description":"Javscript tag description"},{"inline":false,"label":"AI","permalink":"/danny-website/blog/tags/ai","description":"AI tag description"}],"readingTime":0.31,"hasTruncateMarker":true,"authors":[{"name":"marvin-season","title":"Maintainer of Docusaurus","url":"https://github.com/marvin-season","imageURL":"https://avatars.githubusercontent.com/u/64943287?v=4","key":"marvin-season","page":null}],"frontMatter":{"slug":"ai","title":"AI","authors":["marvin-season"],"tags":["javscript","ai"],"date":"2024-02-06"},"unlisted":false,"prevItem":{"title":"React Develop","permalink":"/danny-website/blog/react-develop"},"nextItem":{"title":"Echart","permalink":"/danny-website/blog/echart"}}')}}]);