"use strict";(self.webpackChunkblog_website=self.webpackChunkblog_website||[]).push([[5850],{9359:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var a=n(9074),s=n(5105),i=n(7890),l=n(4651);const r={slug:"ai",title:"AI",authors:["marvin-season"],tags:["javscript","ai"],date:"2024-02-06"},c=void 0,o={authorsImageUrls:[void 0]},d=[{value:"Basic Concepts",id:"basic-concepts",level:2}];function u(t){const e={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{}),"\n",(0,s.jsx)(e.h2,{id:"basic-concepts",children:"Basic Concepts"}),"\n",(0,s.jsx)(e.p,{children:"AIInput is a component that can collect user input and handle it."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"type CoreInputProps = {\n    onSend: (value: string, attachments: Attachment[]) => void;\n    attachmentRender: (value: string, onSelect: (attactment: Attachment) => void) => JSX.Element;\n    attachmentDisplayer: (attachments: Attachment[], setAttachments: AttachmentSetter) => JSX.Element;\n    attachmentHandler?: (attactment: Attachment, setAttachments: AttachmentSetter) => void;\n}\n"})})]})}function m(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(u,{...t})}):u(t)}},4651:(t,e,n)=>{n.d(e,{A:()=>m});var a=n(8101);const s={aiInputContainer:"aiInputContainer_Vebr",attachmentGroup:"attachmentGroup_btSM",attachmentListContainer:"attachmentListContainer_Ltbk",attachment:"attachment_qfjR",input:"input_VD1D",sendBtn:"sendBtn_I8km"};var i=n(73),l=n(5105);const r=t=>{let{onSend:e,attachmentRender:n,attachmentDisplayer:i,attachmentHandler:r}=t;const[c,o]=(0,a.useState)(""),[d,u]=(0,a.useState)([]);return(0,l.jsxs)("div",{className:s.aiInputContainer,children:[(0,l.jsx)("div",{children:i(d,u)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{className:s.input,type:"text",value:c,onChange:t=>o(t.target.value)}),(0,l.jsx)("button",{className:s.sendBtn,onClick:()=>e(c,d),children:"Send"})]}),(0,l.jsx)("div",{children:n(c,(t=>{r?r(t,u):u([...d,t])}))})]})},c=function(t,e){return t.reduce(((t,n)=>{const a=e(n);return(t[a]||=[]).push(n),t}),{})},o=[{type:"tool",symbol:"@",label:"tool 1",value:"tool1"},{type:"tool",symbol:"@",label:"tool 2",value:"tool2"},{type:"file",symbol:"#",label:"file 1",value:"file1"}];function d(t){let{onSend:e}=t;const n=(0,a.useMemo)((()=>c(o,(t=>{let{type:e}=t;return e}))),[o]),[d,u]=(0,a.useState)(void 0);return(0,l.jsx)(r,{onSend:e,attachmentHandler:(t,e)=>{e((e=>e.find((e=>e.value===t.value))?e.filter((e=>e.value!==t.value)):[...e,t]))},attachmentRender:(t,e)=>(0,l.jsx)("div",{className:s.attachmentGroup,children:Object.entries(n).map((t=>{let[a,r]=t;return(0,l.jsx)(i.Ay,{delay:100,duration:0,content:(0,l.jsx)("div",{className:s.attachmentListContainer,children:n[d]?.map((t=>(0,l.jsx)("span",{onClick:()=>{e(t)},children:t.label},t.value)))}),interactive:!0,placement:"top-start",visible:d===a,onClickOutside:()=>u(null),children:(0,l.jsx)("span",{className:s.attachment,onClick:()=>{u(a)},children:n[a][0].symbol})},a)}))}),attachmentDisplayer:(t,e)=>(0,l.jsx)("div",{className:s.attachmentGroup,children:t.map((t=>(0,l.jsx)("span",{className:s.attachment,style:{backgroundColor:"lightgreen"},onClick:()=>{e((e=>e.filter((e=>e.value!==t.value))))},children:t.label},t.value)))})})}function u(t){let{messages:e}=t;return(0,l.jsx)(l.Fragment,{children:e.map(((t,e)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("span",{children:[t.role,":"]}),(0,l.jsx)("span",{children:t.content}),(0,l.jsxs)("span",{children:[" refers: ",t.attachments?.map(((t,e)=>(0,l.jsx)("span",{children:t.label},e)))]})]},e)))})}function m(){const{messages:t,setMessages:e,loading:n,setLoading:i}=function(){const[t,e]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1);return{messages:t,setMessages:e,loading:n,setLoading:s}}();return(0,l.jsxs)("div",{className:s.aiInputContainer,children:[(0,l.jsx)(u,{messages:t}),n?(0,l.jsx)("div",{children:"loading..."}):null,(0,l.jsx)(d,{onSend:async(a,s)=>{if(!n&&a){i(!0);try{await new Promise((t=>setTimeout(t,1e3))),e([...t,{role:"user",content:a,attachments:s},{role:"assistant",content:a,attachments:s}])}catch(l){console.error(l)}finally{i(!1)}}}})]})}},9074:t=>{t.exports=JSON.parse('{"permalink":"/blog/ai","source":"@site/blog/ai/index.mdx","title":"AI","description":"Basic Concepts","date":"2024-02-06T00:00:00.000Z","tags":[{"inline":false,"label":"Javscript","permalink":"/blog/tags/javscript","description":"Javscript tag description"},{"inline":false,"label":"AI","permalink":"/blog/tags/ai","description":"AI tag description"}],"readingTime":0.31,"hasTruncateMarker":true,"authors":[{"name":"marvin-season","title":"Maintainer of Docusaurus","url":"https://github.com/marvin-season","imageURL":"https://avatars.githubusercontent.com/u/64943287?v=4","key":"marvin-season","page":null}],"frontMatter":{"slug":"ai","title":"AI","authors":["marvin-season"],"tags":["javscript","ai"],"date":"2024-02-06"},"unlisted":false,"prevItem":{"title":"React Develop","permalink":"/blog/react-develop"},"nextItem":{"title":"Echart","permalink":"/blog/echart"}}')}}]);