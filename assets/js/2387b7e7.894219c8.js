"use strict";(self.webpackChunkdanny_website=self.webpackChunkdanny_website||[]).push([[3038],{224:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var a=n(2374);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(n),d=r,k=u["".concat(c,".").concat(d)]||u[d]||m[d]||o;return n?a.createElement(k,l(l({ref:t},p),{},{components:n})):a.createElement(k,l({ref:t},p))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7706:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var a=n(3518),r=(n(2374),n(224));const o={slug:"React\u624b\u5199Table\u7ec4\u4ef6",title:"React\u624b\u5199Table\u7ec4\u4ef6",authors:["marvin-season"],tags:["React","Table","antd","Typescript"]},l=void 0,i={permalink:"/danny-website/blog/React\u624b\u5199Table\u7ec4\u4ef6",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/manual-component/index.md",source:"@site/blog/manual-component/index.md",title:"React\u624b\u5199Table\u7ec4\u4ef6",description:"\u7b80\u8981\u6982\u62ec",date:"2023-09-21T10:03:12.000Z",formattedDate:"September 21, 2023",tags:[{label:"React",permalink:"/danny-website/blog/tags/react"},{label:"Table",permalink:"/danny-website/blog/tags/table"},{label:"antd",permalink:"/danny-website/blog/tags/antd"},{label:"Typescript",permalink:"/danny-website/blog/tags/typescript"}],readingTime:3.645,hasTruncateMarker:!1,authors:[{name:"marvin-season",title:"Maintainer of Docusaurus",url:"https://github.com/marvin-season",imageURL:"https://avatars.githubusercontent.com/u/64943287?v=4",key:"marvin-season"}],frontMatter:{slug:"React\u624b\u5199Table\u7ec4\u4ef6",title:"React\u624b\u5199Table\u7ec4\u4ef6",authors:["marvin-season"],tags:["React","Table","antd","Typescript"]},nextItem:{title:"\u67ef\u91cc\u5316",permalink:"/danny-website/blog/\u67ef\u91cc\u5316"}},c={authorsImageUrls:[void 0]},s=[{value:"\u7b80\u8981\u6982\u62ec",id:"\u7b80\u8981\u6982\u62ec",level:2},{value:"\u5b9e\u73b0\u601d\u8def",id:"\u5b9e\u73b0\u601d\u8def",level:2},{value:"\u5b9e\u73b0\u8fc7\u7a0b",id:"\u5b9e\u73b0\u8fc7\u7a0b",level:2},{value:"\u7ec4\u4ef6\u62c6\u5206",id:"\u7ec4\u4ef6\u62c6\u5206",level:3},{value:"ts \u7b7e\u540d",id:"ts-\u7b7e\u540d",level:3},{value:"\u5e94\u7528 ts \u7b7e\u540d",id:"\u5e94\u7528-ts-\u7b7e\u540d",level:3},{value:"\u5f00\u53d1\u7ec6\u8282",id:"\u5f00\u53d1\u7ec6\u8282",level:3},{value:"Recap",id:"recap",level:2},{value:"To be continue ...",id:"to-be-continue-",level:2}],p={toc:s},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u7b80\u8981\u6982\u62ec"},"\u7b80\u8981\u6982\u62ec"),(0,r.kt)("p",null,"\u4e00\u4e2a Table \u7ec4\u4ef6\uff0c\u4f7f\u7528\u65b9\u5f0f\u7c7b\u4f3c antd \u7684 Table \u7ec4\u4ef6\uff0c\u4f46\u662f\u529f\u80fd\u5355\u4e00"),(0,r.kt)("h2",{id:"\u5b9e\u73b0\u601d\u8def"},"\u5b9e\u73b0\u601d\u8def"),(0,r.kt)("p",null,"\u7ed3\u6784\u4e0a\u5305\u62ec\u8868\u5934\u548c\u8868\u4f53,\u6570\u636e\u4e0a\u5bf9\u5e94\u8868\u5934\u6570\u636e\u548c\u8868\u4f53\u6570\u636e\uff0c\u5bf9\u8868\u5934\u6570\u636e\u548c\u8868\u4f53\u6570\u636e\u8fdb\u884c\u904d\u5386\u751f\u6210 react \u7ec4\u4ef6\u5373\u53ef\uff01"),(0,r.kt)("p",null,"\u671f\u5f85\u5982\u4e0b\u4f7f\u7528\u7684\u4f7f\u7528\u65b9\u5f0f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"<Table datasource={[]} columns={[]} />\n")),(0,r.kt)("a",{id:"id1"}),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"\u7ec4\u4ef6\u6709\u5982\u4e0b\u57fa\u672c\u529f\u80fd\uff1a"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"\u663e\u793a\u5217\u8868\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"\u8868\u4f53\u7684\u5217\u53ef\u4ee5\u56fa\u5b9a"),(0,r.kt)("li",{parentName:"ul"},"render \u81ea\u5b9a\u4e49\u663e\u793a\u5185\u5bb9"),(0,r.kt)("li",{parentName:"ul"},"\u70b9\u51fb\u8868\u4f53\u6570\u636e,\u89e6\u53d1 onClick \u4e8b\u4ef6")),(0,r.kt)("p",{parentName:"admonition"},"\u8868\u5934\u6570\u636e: columns\uff1b\n\u8868\u4f53\u6570\u636e: datasource\uff1b")),(0,r.kt)("h2",{id:"\u5b9e\u73b0\u8fc7\u7a0b"},"\u5b9e\u73b0\u8fc7\u7a0b"),(0,r.kt)("h3",{id:"\u7ec4\u4ef6\u62c6\u5206"},"\u7ec4\u4ef6\u62c6\u5206"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const TableHead = () => <></>;\nconst TableBody = () => <></>;\nconst Table = () => <></>;\n")),(0,r.kt)("h3",{id:"ts-\u7b7e\u540d"},"ts \u7b7e\u540d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'export interface TableProps {\n  onClick?: (data: RowColumnDataProps) => void;\n  columns: ColumnProp[];\n  datasource: DatasourceProp[];\n}\n\nexport interface ColumnProp {\n  key: string;\n  width?: string;\n  title: string;\n  dataIndex: string;\n  render?: (data: RowColumnDataProps) => ReactNode;\n  fixed?: "left" | "right" | string;\n}\n\nexport interface DatasourceProp {\n  [_: string]: any;\n}\n\nexport type RowColumnDataProps = {\n  row: DatasourceProp;\n  column: ColumnProp;\n};\n')),(0,r.kt)("h3",{id:"\u5e94\u7528-ts-\u7b7e\u540d"},"\u5e94\u7528 ts \u7b7e\u540d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'export const Table: FunctionComponent<TableProps> = ({\n  datasource,\n  columns,\n  onClick,\n}) => {};\n\nconst TableHead = ({ columns }: Pick<TableProps, "columns">) => {};\n\nconst TableBody = ({\n  datasource,\n  columns,\n  onClick,\n}: Pick<TableProps, "datasource" | "columns" | "onClick">) => {};\n')),(0,r.kt)("h3",{id:"\u5f00\u53d1\u7ec6\u8282"},"\u5f00\u53d1\u7ec6\u8282"),(0,r.kt)("p",null,"\u56f4\u7ed5\u8be5\u7ec4\u4ef6\u7684",(0,r.kt)("a",{parentName:"p",href:"#id1"},"\u57fa\u672c\u529f\u80fd")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u663e\u793a\u5217\u8868\u6570\u636e")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"\u8868\u5934\u6570\u636e\uff1a 1 \u4e2a for \u5faa\u73af\uff1b\n\u8868\u4f53\u6570\u636e\uff1a 2 \u4e2a for \u5faa\u73af\uff1b"),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"\u8868\u5934")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const header = columns.map((column) => (\n  <td key={column.key}>{column.title}</td>\n));\n")),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"\u8868\u4f53")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const body = datasource.map((item, index) => {\n  const tds = columns.map((column) => {\n    return <td key={column.key}>{item[column.dataIndex]}</td>;\n  });\n  return <tr key={index}>{tds}</tr>;\n});\n"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8868\u4f53\u7684\u5217\u53ef\u4ee5\u56fa\u5b9a")),(0,r.kt)("p",null,"\u4f7f\u7528 sticky \u5b9a\u4f4d\u5b9e\u73b0\u56fa\u5b9a\u5217\u3002 \u5728 columns \u7684\u914d\u7f6e\u9879\u4e2d\u6211\u4eec\u671f\u671b\u4f20\u5165 fixed: 'right',\u4ece\u800c\u5b9e\u73b0\u8be5\u5217\u53f3\u4fa7\u56fa\u5b9a"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"\u5c06\u5bf9\u5e94\u7684 style \u4f20\u5165 td\uff08\u5217\u6240\u5728\u7684\u8868\u5934\u8868\u4f53\u6570\u636e\u683c\uff09\u5373\u53ef\u3002"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-css"},"style {\n  position: sticky;\n  right: 0;\n}\n\nparentStyle {\n  position: relative;\n}\n")),(0,r.kt)("p",{parentName:"admonition"},"\u6ce8\u610f\u5176\u4ed6\u7684\u6570\u636e\u683c\u9700\u8981\u6307\u5b9a\u5bbd\u5ea6"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const header = columns.map((column) => (\n  const style = genStyle(column)\n  <td key={column.key} style={style}>{column.title}</td>\n));\n\nconst generateStyle = (column: ColumnProp) => {\n  let defaultStyle = {\n    width: '160px',\n  };\n\n  if (column.fixed) {\n    const stickyStyle: any = {\n      position: 'sticky',\n      background: 'white',\n      [column.fixed]: 0,\n    };\n    defaultStyle = { ...defaultStyle, ...stickyStyle };\n  }\n  return defaultStyle;\n};\n\u7236\u5143\u7d20\u6837\u5f0f\u6b64\u5904\u7701\u7565\n\n\u4e0a\u8ff0sticky\u5b9a\u4f4d\u4e2d\uff0cright\u6052\u4e3a0\uff0c\n\u8fd9\u6837\u5f53\u6307\u5b9a\u591a\u4e2a\u5217\u56fa\u5b9a\u5728\u540c\u4e00\u4fa7\u65f6\u4f1a\u51fa\u73b0bug\uff0c\u9700\u8981\u989d\u5916\u52a0\u903b\u8f91\uff0c\n\u5904\u7406right\u7684\u503c\u4e3a\u53f3\u4fa7\u5df2\u7ecf\u56fa\u5b9a\u5217\u7684\u5bbd\u5ea6\n"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"render \u81ea\u5b9a\u4e49\u663e\u793a\u5185\u5bb9")),(0,r.kt)("p",null,"\u7528\u6237\u53ef\u80fd\u9700\u8981\u5728\u6570\u636e\u683c\u4e2d\u663e\u793a\u64cd\u4f5c\u6309\u94ae\uff0c\u6240\u4ee5\u5728 columns \u914d\u7f6e\u9879\u4e2d\u63d0\u4f9b\u4e00\u4e2a render \u9009\u9879\uff0c\u8be6\u89c1 ts \u7b7e\u540d"),(0,r.kt)("p",null,"\u5728\u6e32\u67d3\u8868\u4f53\u7684\u65f6\u5019\u8c03\u7528 render \u51fd\u6570\u6e32\u67d3\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5373\u53ef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const tdContent = column.render ? (\n  column.render({ row: item, column })\n) : (\n  <>{item[column.dataIndex]}</>\n);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u70b9\u51fb\u8868\u4f53\u6570\u636e,\u89e6\u53d1 onClick \u4e8b\u4ef6")),(0,r.kt)("p",null,"\u8c03\u7528\u7ec4\u4ef6\u4e0b\u4f20\u7684 onClick \u4e8b\u4ef6\u5e76\u4f20\u5165\u9700\u8981\u7684\u6570\u636e\u5373\u53ef\uff0c\u6bd4\u5982\u884c\u6570\u636e\u548c\u5217\u6570\u636e\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const td = (\n  <td\n    onClick={() => {\n      onClick && onClick({ row, column });\n    }}\n  ></td>\n);\n\n")),(0,r.kt)("h2",{id:"recap"},"Recap"),(0,r.kt)("h2",{id:"to-be-continue-"},"To be continue ..."))}m.isMDXComponent=!0}}]);